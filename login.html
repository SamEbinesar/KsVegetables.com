<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input, button, textarea { width: 100%; margin: 8px 0; padding: 8px; }
    input{ 
      color: green;
      border: black;
    }
    button {
      background-color: rgb(58, 255, 58);
      color: white;

    }
    
  button:hover {
  background: #33ff5f;
    transform: translateY(-4px) scale(1.05); 
    box-shadow: 0 10px 20px rgb(255, 255, 255)
  
}
h2 {
   color: #ffffff;               /* green */
    text-shadow: 0px 0px 10px white, 0px 0px 20px white;
    animation: fadeInOut 3s infinite;
}
label {
  font-weight: bold;
  color: rgb(100, 255, 69);
}
    
  </style>
  <link rel="stylesheet" href="style.css"/>

</head>
<body>
  <h2>Customer Login</h2>

  <label for="mobile">Mobile Number:</label>
  <input type="text" id="mobile" placeholder="Enter mobile number" />
  <button onclick="sendOTP()">Generate OTP</button>

  <div id="stepOTP" style="display:none;">
    <label for="otp">Enter OTP:</label>
    <input type="text" id="otp" placeholder="Enter OTP" />
    <button onclick="verifyOTP()">Verify OTP</button>
  </div>

  <div id="stepDetails" style="display:none;">
    <label for="name">Name:</label>
    <input type="text" id="name" placeholder="Enter your name" />
    <label for="address">Address:</label>
    <textarea id="address" placeholder="Enter your address"></textarea>
    <button onclick="saveDetails()">Save</button>
  </div>
  <div id="finalStep" style="display:none">
    <button onclick="closeLoginpage()">Order now -></button>
  </div>
  <script>
    let generatedOTP = null;

    function sendOTP() {
      const mobile = document.getElementById("mobile").value.trim();

      if (mobile === "" || mobile.length !== 10 || isNaN(mobile)) {
        alert("‚ö†Ô∏è Please enter a valid 10-digit mobile number");
        return;
      }

      // Generate 6-digit random OTP
      generatedOTP = Math.floor(100000 + Math.random() * 900000);

      alert("‚úÖ OTP sent to " + mobile + "\n(For testing, OTP is: " + generatedOTP + ")");
      document.getElementById("stepOTP").style.display = "block";
    }

    function verifyOTP() {
      const enteredOTP = document.getElementById("otp").value.trim();

      if (enteredOTP === "") {
        alert("‚ö†Ô∏è Please enter the OTP");
        return;
      }

      if (enteredOTP == generatedOTP) {
        alert("‚úÖ OTP Verified Successfully!");
        document.getElementById("stepDetails").style.display = "block";
      } else {
        alert("‚ùå Invalid OTP. Please try again.");
      }
    }

    function saveDetails() {
        const enteredName = document.getElementById("name").value.trim();
        const enteredAddress = document.getElementById("address").value.trim();
        if(enteredName === "" || enteredAddress === ""){
            alert("Give your details properly");
        } else {
            
            alert("üéâ Details saved successfully!");
            document.getElementById("finalStep").style.display = "block";
        }
    }
function closePopup() {
     document.getElementById("loginPopup").style.display = "none";
}
function closeLoginpage() {
        // Call parent's functions from inside iframe
    window.parent.closePopup();  
    
    // Redirect parent window to order.html
   
    window.parent.setLogin();
    // Update navbar icon on parent page
    window.parent.updateLoginStatus();
    window.parent.location.href = "order.html";

}
  </script>
</body>
</html>
